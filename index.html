<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Heart Bound</title>
<style>
body {margin:0; overflow:hidden; background:#111; font-family:Arial,sans-serif;}
canvas {display:block; margin:auto;}
#menu {
  position:absolute; inset:0;
  background:#111;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  color:white;
}
#menu h1 {font-size:70px; margin-bottom:160px;}
.heart {
  width:220px; height:200px;
  background:red; position:relative;
  transform:rotate(-45deg); cursor:pointer;
}
.heart::before, .heart::after {
  content:""; position:absolute; width:220px; height:200px;
  background:red; border-radius:50%;
}
.heart::before {top:-110px;}
.heart::after {left:110px;}
.heart span {
  position:absolute; transform:rotate(45deg);
  top:85px; left:60px;
  font-size:36px; font-weight:bold; color:white;
}
</style>
</head>
<body>

<div id="menu">
<h1>HEART BOUND</h1>
<div class="heart" id="playBtn"><span>PLAY</span></div>
</div>

<canvas id="game" width="900" height="450"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Game state
let gameRunning = false, score = 0, lives = 3, timeCounter = 0, won = false;

// Player (stick figure)
const player = {x:120, y:0, vy:0, jumping:false, width:10, height:40};

// Obstacle
const obstacle = {x:900, y:320, w:35, h:40, speed:5, passed:false};

// Bubble +50
const bubble = {x:1400, y:260, r:18, collected:false};

// Fireworks
let fireworks=[];

// Menu
document.getElementById("playBtn").addEventListener("click", startGame);
document.addEventListener("keydown", e => {
  if(e.code==="Space" && !player.jumping){ player.vy=-14; player.jumping=true; }
});

function startGame(){
  document.getElementById("menu").style.display="none";
  gameRunning=true;
  score=0; lives=3; timeCounter=0;
  obstacle.x=900; obstacle.passed=false;
  bubble.x=1400; bubble.collected=false;
  won=false;
  player.y=playerOnGrassY(); // position player on grass
  requestAnimationFrame(loop);
}

// Get player y so feet are on grass
function playerOnGrassY(){ return 350 - player.height; } // Grass starts at 350

// Background
function drawBackground(){
  ctx.fillStyle="#6ec6ff"; ctx.fillRect(0,0,900,450);
  // Rainbow
  const colors=["red","orange","yellow","green","blue","purple"];
  colors.forEach((c,i)=>{
    ctx.strokeStyle=c; ctx.lineWidth=7;
    ctx.beginPath();
    ctx.arc(750,400,120-i*10,Math.PI,2*Math.PI);
    ctx.stroke();
  });
  // Grass
  ctx.fillStyle="#4caf50"; ctx.fillRect(0,350,900,100);
  // Clouds
  ctx.fillStyle="#fff";
  [[200,80],[230,80],[260,80],[600,60],[630,60],[660,60]].forEach(([cx,cy])=>{
    ctx.beginPath();
    ctx.arc(cx,cy,30,0,Math.PI*2); ctx.fill();
  });
}

// Draw stick figure
function drawPlayer(){
  const x=player.x, y=player.y;
  ctx.strokeStyle="#000"; ctx.lineWidth=3;

  // Body
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.lineTo(x,y-30); // body
  ctx.stroke();

  // Arms
  ctx.beginPath();
  ctx.moveTo(x,y-20);
  ctx.lineTo(x-10,y-10); // left
  ctx.moveTo(x,y-20);
  ctx.lineTo(x+10,y-10); // right
  ctx.stroke();

  // Legs
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.lineTo(x-10,y+20); // left
  ctx.moveTo(x,y);
  ctx.lineTo(x+10,y+20); // right
  ctx.stroke();

  // Head
  ctx.beginPath();
  ctx.arc(x,y-40,8,0,Math.PI*2);
  ctx.stroke();
}

// Draw lives as hearts
function drawLives(){
  for(let i=0;i<lives;i++){
    ctx.fillStyle="red"; 
    ctx.beginPath();
    ctx.arc(25+i*30,25,7,0,Math.PI*2);
    ctx.arc(33+i*30,25,7,0,Math.PI*2); ctx.fill();
  }
}

// Fireworks
function createFirework(){
  let x=Math.random()*800+50, y=Math.random()*200+50;
  const colors=["red","orange","yellow","green","blue","purple"];
  for(let i=0;i<20;i++){
    fireworks.push({
      x:x,y:y,dx:(Math.random()-0.5)*6,dy:(Math.random()-0.5)*6,
      color:colors[Math.floor(Math.random()*colors.length)],
      life:60
    });
  }
}

function drawFireworks(){
  fireworks.forEach(f=>{
    ctx.fillStyle=f.color;
    ctx.beginPath();
    ctx.arc(f.x,f.y,3,0,Math.PI*2); ctx.fill();
    f.x+=f.dx; f.y+=f.dy; f.life--;
  });
  fireworks = fireworks.filter(f=>f.life>0);
}

// Game over
function gameOver(){
  gameRunning=false;
  ctx.fillStyle="black"; ctx.font="60px Arial";
  ctx.fillText("GAME OVER",280,200);
  ctx.font="30px Arial";
  ctx.fillText("Refresh to Restart",320,260);
}

// Loop
function loop(){
  if(!gameRunning) return;
  ctx.clearRect(0,0,900,450);
  drawBackground();

  // Gravity
  player.vy+=0.8; player.y+=player.vy;
  if(player.y>=playerOnGrassY()){player.y=playerOnGrassY(); player.vy=0; player.jumping=false;}

  // Obstacle
  obstacle.x-=obstacle.speed;
  if(obstacle.x<-50){obstacle.x=900; obstacle.passed=false;}
  if(!obstacle.passed && obstacle.x<player.x){score+=100; obstacle.passed=true;}

  // Collision
  if(player.x+5>obstacle.x && player.x-5<obstacle.x+obstacle.w && player.y+player.height>obstacle.y){
    lives--; obstacle.x=900;
    if(lives<=0) return gameOver();
  }

  // Bubble
  bubble.x-=3;
  ctx.strokeStyle="white"; ctx.beginPath(); ctx.arc(bubble.x,bubble.y,bubble.r,0,Math.PI*2); ctx.stroke();
  ctx.fillStyle="black"; ctx.fillText("+50",bubble.x-12,bubble.y+5);
  if(!bubble.collected && Math.abs(player.x-bubble.x)<25 && Math.abs(player.y-bubble.y)<30 && !player.jumping){
    score+=50; bubble.collected=true; bubble.x=1400;
  }

  // Draw everything
  drawPlayer();
  ctx.fillStyle="red"; ctx.fillRect(obstacle.x,obstacle.y,obstacle.w,obstacle.h);
  drawLives();
  ctx.fillStyle="black"; ctx.font="20px Arial"; ctx.fillText("Score: "+score,760,30);

  // Fireworks at 1000
  if(score>=1000 && !won){won=true; createFirework(); createFirework(); createFirework();}
  if(won){drawFireworks(); ctx.fillStyle="red"; ctx.font="50px Arial"; ctx.fillText("I LOVE YOU ‚ù§Ô∏è",260,150); ctx.fillStyle="gold"; ctx.font="40px Arial"; ctx.fillText("üëë WINNER üëë",300,220);}
  
  requestAnimationFrame(loop);
}
</script>
</body>
</html>
